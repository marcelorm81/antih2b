import React, { useEffect, useRef, useState } from 'react';
import gsap from 'gsap';
import { Menu, X } from 'lucide-react';

export const Navbar: React.FC = () => {
  const [isOpen, setIsOpen] = useState(false);
  const navRef = useRef<HTMLElement>(null);
  const menuRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    gsap.from(navRef.current, {
      y: -100,
      opacity: 0,
      duration: 1,
      ease: "power3.out",
      delay: 0.5
    });
  }, []);

  useEffect(() => {
    if (isOpen) {
      gsap.to(menuRef.current, {
        x: '0%',
        duration: 0.6,
        ease: 'expo.out'
      });
      document.body.style.overflow = 'hidden';
    } else {
      gsap.to(menuRef.current, {
        x: '100%',
        duration: 0.6,
        ease: 'expo.in'
      });
      document.body.style.overflow = '';
    }
  }, [isOpen]);

  const navLinks = [
    { name: 'GAMES', href: '#games' },
    { name: 'OUR STORY', href: '#story' },
    { name: 'COLLECTION', href: '#collection' },
    { name: 'EVENTS', href: '#events' },
    { name: 'CREATORS', href: '#creators' },
  ];

  return (
    <>
      <nav ref={navRef} className="fixed top-0 left-0 w-full z-50 px-6 py-6 flex justify-between items-center mix-blend-difference text-white">
        <a href="#" className="w-32 md:w-48 hover:opacity-80 transition-opacity block">
          <svg viewBox="0 0 1169 125" fill="none" className="w-full h-auto">
            <path d="M1088.85 124.119C1072.19 124.119 1053.76 114.748 1050.2 96.329H1067.99C1070.25 104.731 1078.18 109.901 1089.01 109.901C1097.25 109.901 1105.98 106.508 1105.98 98.4294C1105.98 91.805 1099.36 89.2199 1090.14 87.6042L1080.44 85.9885C1065.56 83.565 1055.22 76.2944 1055.22 63.2073C1055.22 47.3736 1071.06 36.8716 1086.58 36.8716C1101.62 36.8716 1117.3 46.4041 1121.34 63.0457H1103.72C1100.97 54.8057 1094.83 50.7665 1086.42 50.7665C1078.18 50.7665 1072.19 55.7751 1072.19 61.9148C1072.19 67.5697 1076.72 69.9932 1084.97 71.2858L1094.34 72.7399C1108.57 74.8403 1123.12 81.303 1123.12 97.7831C1123.12 114.748 1105.01 124.119 1088.85 124.119Z" fill="currentColor"/>
            <path d="M1007.51 124.119C986.491 124.119 965.473 105.7 965.473 80.4952C965.473 55.2904 986.491 36.8716 1007.51 36.8716C1028.53 36.8716 1049.55 55.2904 1049.55 80.4952C1049.55 105.7 1028.53 124.119 1007.51 124.119ZM1007.51 109.254C1022.22 109.254 1032.41 96.9752 1032.41 80.4952C1032.41 64.0152 1022.22 51.7359 1007.51 51.7359C992.958 51.7359 982.773 64.0152 982.773 80.4952C982.773 96.9752 992.958 109.254 1007.51 109.254Z" fill="currentColor"/>
            <path d="M939.418 122.503V39.2009H955.909V122.503H939.418ZM938.609 28.7881V9.40447H956.717V28.7881H938.609Z" fill="currentColor"/>
            <path d="M911.248 9.40447H927.74V122.503H911.248V113.616C905.105 120.241 896.212 124.118 886.188 124.118C866.786 124.118 845.283 105.861 845.283 80.4948C845.283 55.1285 866.786 36.8712 886.188 36.8712C896.212 36.8712 905.105 40.7488 911.248 47.3732V9.40447ZM887.32 109.254C900.901 109.254 911.248 98.9137 911.248 80.4948C911.248 62.0759 900.901 51.7355 887.32 51.7355C872.607 51.7355 862.583 64.0148 862.583 80.4948C862.583 96.9748 872.607 109.254 887.32 109.254Z" fill="currentColor"/>
            <path d="M836.527 38.486V122.502H820.521V111.677C815.185 118.947 806.131 124.118 794.329 124.118C776.867 124.118 763.448 112.969 763.448 90.3496V38.486H779.939V87.1183C779.939 101.659 786.083 108.607 797.401 108.607C808.718 108.607 820.036 98.1049 820.036 78.7167V38.486H836.527Z" fill="currentColor"/>
            <path d="M743.688 122.987C726.874 122.987 717.496 113.455 717.496 94.3897V53.0281H701.651V38.4869H717.82V9.40447H733.664V38.4869H753.713V53.0281H733.988V94.0666C733.988 105.7 738.515 108.608 745.467 108.608H747.084V122.987H743.688Z" fill="currentColor"/>
            <path d="M655.31 124.12C633.16 124.12 611.656 110.225 606.321 87.4435H625.561C629.441 99.8843 639.465 107.963 656.118 107.963C669.861 107.963 679.4 100.531 679.4 90.6749C679.4 80.8192 670.831 76.1337 656.927 73.5486L646.094 71.4482C628.633 68.2168 612.141 61.1078 612.141 40.7501C612.141 22.6544 629.926 7.79005 651.106 7.79005C671.801 7.79005 690.88 20.8771 695.568 42.5274H676.49C672.286 28.6324 662.101 23.947 650.46 23.947C638.334 23.947 631.381 31.5407 631.381 39.4576C631.381 49.1517 639.304 52.3831 650.136 54.3219L661.939 56.5839C681.826 60.1384 698.64 69.3478 698.64 89.7055C698.64 109.255 677.784 124.12 655.31 124.12Z" fill="currentColor"/>
            <path d="M526.917 124.119C505.898 124.119 484.88 105.7 484.88 80.4952C484.88 55.2904 505.898 36.8716 526.917 36.8716C547.935 36.8716 568.954 55.2904 568.954 80.4952C568.954 105.7 547.935 124.119 526.917 124.119ZM526.917 109.254C541.63 109.254 551.815 96.9752 551.815 80.4952C551.815 64.0152 541.63 51.7359 526.917 51.7359C512.365 51.7359 502.18 64.0152 502.18 80.4952C502.18 96.9752 512.365 109.254 526.917 109.254Z" fill="currentColor"/>
            <path d="M445.274 122.502V38.4866H461.28V49.3118C465.322 42.3643 473.891 37.6788 486.987 37.6788H490.544V53.351H486.987C471.789 53.351 461.765 63.2067 461.765 82.595V122.502H445.274Z" fill="currentColor"/>
            <path d="M397.176 124.119C375.188 124.119 355.624 106.185 355.624 80.4952C355.624 55.6136 375.834 36.8716 396.529 36.8716C415.446 36.8716 438.89 49.0034 436.303 87.2952H373.247C375.511 100.221 384.565 110.385 397.176 110.385C405.098 110.385 411.566 107.316 416.093 101.014H433.231C426.764 116.363 410.596 124.119 397.176 124.119ZM372.762 74.1191H419.811C419.488 57.316 408.655 50.0641 396.529 50.0641C384.08 50.0641 373.894 58.6085 372.762 74.1191Z" fill="currentColor"/>
            <path d="M273.772 122.503V9.40445H290.263V48.6657C295.599 41.7182 304.491 36.8712 315.809 36.8712C333.432 36.8712 346.851 48.0194 346.851 70.6391V122.503H330.36V73.8704C330.36 59.3292 324.216 52.3818 313.06 52.3818C301.743 52.3818 290.263 62.8838 290.263 82.272V122.503H273.772Z" fill="currentColor"/>
            <path d="M245.58 122.503V39.2008H262.071V122.503H245.58ZM244.772 28.7881V9.40445H262.88V28.7881H244.772Z" fill="currentColor"/>
            <path d="M226.664 122.987C209.849 122.987 200.472 113.455 200.472 94.3897V53.0281H184.627V38.4868H200.795V9.40445H216.64V38.4868H236.688V53.0281H216.963V94.0666C216.963 105.7 221.49 108.608 228.442 108.608H230.059V122.987H226.664Z" fill="currentColor"/>
            <path d="M108.224 122.503V38.4873H124.23V49.3124C129.566 42.0418 138.62 36.8716 150.261 36.8716C167.884 36.8716 181.304 48.0198 181.304 70.6395V122.503H164.812V73.8709C164.812 59.3297 158.668 52.3822 147.512 52.3822C136.195 52.3822 124.715 62.8842 124.715 82.2724V122.503H108.224Z" fill="currentColor"/>
            <path d="M0 122.503L41.7135 9.40445H64.0254L104.607 122.503H85.3673L75.6664 94.3897H28.1324L18.1082 122.503H0ZM33.9529 78.2328H70.1693L52.2228 26.5308L33.9529 78.2328Z" fill="currentColor"/>
            <path d="M1140.62 25.2888C1140.62 22.5215 1140.88 17.5609 1141.68 13.1277C1141.35 13.1401 1141.03 13.1547 1140.73 13.1726C1138.99 13.2763 1137.92 13.4741 1136.92 13.6804L1136.91 13.6833L1136.9 13.6853C1135.19 14.0115 1133.39 14.2707 1131.65 14.5066V35.5808C1131.65 36.4092 1130.98 37.0806 1130.15 37.0808C1129.33 37.0808 1128.65 36.4093 1128.65 35.5808V14.9109C1126.84 15.1587 1125.19 15.4056 1123.82 15.7126C1120.53 16.4529 1116.77 17.3298 1115.33 17.5525C1114.51 17.6786 1113.74 17.1172 1113.62 16.2986C1113.49 15.4798 1114.05 14.7131 1114.87 14.5867C1116.18 14.3845 1119.76 13.5503 1123.17 12.7849C1124.77 12.4254 1126.68 12.1491 1128.65 11.8826V10.4871C1128.65 9.65855 1129.33 8.98706 1130.15 8.98706C1130.98 8.98729 1131.65 9.65869 1131.65 10.4871V11.4773C1132.95 11.2992 1134.25 11.1111 1135.51 10.8904L1136.34 10.738C1137.42 10.5148 1138.63 10.2917 1140.55 10.1775C1141.11 10.1443 1141.73 10.1217 1142.35 10.1052C1142.44 9.76057 1142.54 9.42423 1142.64 9.09839C1143.2 7.30892 1143.71 5.87185 1144.2 4.781C1144.66 3.74801 1145.2 2.80837 1145.9 2.24487L1146.07 2.11792C1146.49 1.82799 1147.09 1.59872 1147.79 1.77221C1148.51 1.9517 1148.93 2.47265 1149.16 2.81811C1149.6 3.50402 1149.87 4.49641 1150.08 5.34839C1150.28 6.23239 1150.49 7.33119 1150.69 8.22436C1150.89 9.18561 1151.1 9.98857 1151.33 10.5525C1152.23 12.7213 1154.41 13.2019 1155.86 13.5876C1155.98 13.3278 1156.12 12.8768 1156.25 12.1833C1156.4 11.3807 1156.51 10.4714 1156.64 9.49194C1156.76 8.554 1156.91 7.54133 1157.14 6.68042C1157.35 5.88667 1157.43 5.0956 1157.51 4.23901C1157.59 3.44875 1157.67 2.4806 1157.98 1.62866C1158.03 1.49068 1158.11 1.25431 1158.2 1.05737C1158.25 0.966496 1158.33 0.789252 1158.47 0.615964C1158.53 0.543549 1159.01 -0.0842232 1159.88 0.00951873C1160.77 0.10483 1161.11 0.837824 1161.15 0.939206C1161.25 1.15567 1161.31 1.3732 1161.33 1.51928C1161.4 1.83485 1161.44 2.25442 1161.47 2.77026C1162.17 14.7842 1163.16 17.6147 1164.23 20.1824C1165.29 22.5728 1166.36 24.3843 1167.06 25.5681C1167.12 25.6304 1167.18 25.6882 1167.24 25.738C1167.99 25.861 1168.55 26.5407 1168.49 27.3191C1168.48 27.5464 1168.41 27.8469 1168.2 28.1335C1167.98 28.4282 1167.7 28.6016 1167.44 28.6892C1166.99 28.8388 1166.61 28.7453 1166.49 28.7136C1166.19 28.6334 1165.93 28.4795 1165.77 28.3806C1165.42 28.154 1165.02 27.8156 1164.7 27.4314L1164.61 27.3298L1164.54 27.2156C1163.86 26.0428 1162.67 24.0471 1161.48 21.3865L1161.47 21.3679L1161.46 21.3484C1160.62 19.3176 1159.88 17.2063 1159.27 12.3318C1159.25 12.4704 1159.23 12.6078 1159.2 12.7419C1159.04 13.6159 1158.78 14.6159 1158.29 15.3699C1158.03 15.7697 1157.64 16.1898 1157.08 16.4402C1156.49 16.7017 1155.87 16.7065 1155.29 16.5437C1154.42 16.2969 1150.18 15.6306 1148.56 11.6941C1148.22 10.8602 1147.96 9.82469 1147.75 8.85913C1147.53 7.82548 1147.36 6.90798 1147.16 6.00952C1147.13 5.9222 1147.1 5.81306 1147.07 5.70971C1147.03 5.80256 1146.98 5.90223 1146.93 6.00952C1146.52 6.9371 1146.05 8.24118 1145.51 9.98803C1145.5 10.0139 1145.49 10.0401 1145.48 10.0662C1145.75 10.0656 1145.99 10.0652 1146.19 10.0652C1147.02 10.0653 1147.69 10.7368 1147.69 11.5652C1147.69 12.3936 1147.02 13.0651 1146.19 13.0652C1145.82 13.0652 1145.31 13.0658 1144.75 13.0691C1143.91 17.3493 1143.62 22.4446 1143.62 25.2888C1143.62 26.117 1142.95 26.7886 1142.12 26.7888C1141.29 26.7888 1140.62 26.1171 1140.62 25.2888Z" />
          </svg>
        </a>

        <div className="hidden md:flex space-x-10">
          {navLinks.map((link) => (
            <a 
              key={link.name} 
              href={link.href} 
              className="text-xs font-bold font-mono tracking-widest hover:text-accent transition-colors"
            >
              {link.name}
            </a>
          ))}
        </div>

        <button 
          className="md:hidden z-50 relative"
          onClick={() => setIsOpen(!isOpen)}
        >
          {isOpen ? <X size={24} /> : <Menu size={24} />}
        </button>
      </nav>

      {/* Mobile Menu Overlay */}
      <div 
        ref={menuRef} 
        className="fixed inset-0 z-40 bg-anti-black transform translate-x-full md:hidden flex flex-col justify-center items-center"
      >
        <div className="flex flex-col space-y-8 text-center">
          {navLinks.map((link, idx) => (
            <a 
              key={link.name}
              href={link.href}
              onClick={() => setIsOpen(false)}
              className="text-4xl font-display font-bold text-white hover:text-accent transition-colors"
            >
              {link.name}
            </a>
          ))}
        </div>
      </div>
    </>
  );
};